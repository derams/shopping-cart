<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="../css/shop.css" />
    </head>
    <body>
        <div class="wrap">
            <div class="modal">
                <div class="card clearfix">
                    <h3><a href="javascript:;" class="clear1">X</a></h3>
                    <img src="../images/999_03.jpg" alt="" />
                    <div class="login clearfix">
                        <input type="text" class="username" placeholder="请输入手机号" />
                        <input type="password" class="password" placeholder="请输入银行卡密码" />
                        <input type="text" class="code" placeholder="请输入验证码" />
                        <img src="../images/code_07.jpg" alt="" />
                        <a href="javascript:;" class="phone"><i class="iconfont">&#xe606;</i></a>
                        <a href="javascript:;" class="pass"><i class="iconfont">&#xe60a;</i></a>
                        <a href="javascript:; "class="log">登录</a>
                        <a href="javascript:;"class="forget">忘记密码？</a>
                        <a href="javascript:;"class="sign">注册</a>
                    </div>
                </div>
                <div class="connect">
                    <a href="javascript:;" class="qq"><i class="iconfont">&#xe62d;</i></a>
                    <a href="javascript:;" class="weixin"><i class="iconfont">&#xe659;</i></a>
                    <a href="javascript:;" class="weibo"><i class="iconfont">&#xe629;</i></a>
                </div>
            </div>
            <header>
                <div class="top clearfix">
                  <a class='home' href="#"><img src="../images/more_03.jpg" alt="" /></a>
                  <a class='logo' href="#"><img src="../images/logo.png" alt="" /></a>
                  <a class='search' href="#"><img src="../images/ser.png" alt="" /></a>
                  <a class='car' href="#"><img src="../images/bal_05.jpg" alt="" /></a>
                  <a class='login1' href="#">登录/注册</a>
                </div>
            </header>
            <div class="sky">
                <img src="../images/sky_03.jpg" alt="" />
            </div>
            <div class="main">
                <div class="main_con">
                    <div class="nav clearfix">
                        <p>
                            购物车<span>[<span class="sum">99</span>件]</span>
                        </p>
                        <ul>
                            <li>购物车</li>
                            <li>填写订单</li>
                            <li>付款，购买成功</li>
                        </ul>
                    </div>
                    <div class="tatil">
                        <ul class="clearfix">
                            <li>
                                <input type="checkbox" class="all" />全选
                            </li>
                            <li>商品</li>
                            <li>单价</li>
                            <li>数量</li>
                            <li>小计</li>
                            <li>操作</li>
                        </ul>
                    </div>
                    <div class="comment">
                        <ul class="clearfix com">
                            <li><input type="checkbox" class="shop" /></li>
                            <li class="clearfix">
                                <img src="../images/shop_07.jpg" alt="" />
                                <p>
                                    龙之谷六周年限定礼包大Boss冰龙款男<br />士T恤
                                    <span>
                                        款式：iphone 5<br />
                                        尺码：XL
                                    </span>
                                </p>
                            </li>
                            <li>￥<span class="price">79.00</span></li>
                            <li><a href="javascript:;" class="add">+</a></li>
                            <li><input type="text" value="1" class="int" /></li>
                            <li><a href="javascript:;" class="sub">-</a></li>
                            <li>￥<span class="subtotal">79.00</span></li>
                            <li><a href="javascript:;" class="remove">X</a></li>
                            <li class="show">
                                <a href="javascript:;" class="ok">确定删除</a>
                                <a href="javascript:;" class="clear">不删除</a>
                            </li>
                        </ul>
                    </div>
                    <div class="comment">
                        <ul class="clearfix com">
                            <li><input type="checkbox" class="shop" /></li>
                            <li class="clearfix">
                                <img src="../images/shop_07.jpg" alt="" />
                                <p>
                                    龙之谷六周年限定礼包大Boss冰龙款男<br />士T恤
                                    <span>
                                        款式：iphone 5<br />
                                        尺码：XL
                                    </span>
                                </p>
                            </li>
                            <li>￥<span class="price">79.00</span></li>
                            <li><a href="javascript:;" class="add">+</a></li>
                            <li><input type="text" value="1" class="int" /></li>
                            <li><a href="javascript:;" class="sub">-</a></li>
                            <li>￥<span class="subtotal">79.00</span></li>
                            <li><a href="javascript:;" class="remove">X</a></li>
                            <li class="show">
                                <a href="javascript:;" class="ok">确定删除</a>
                                <a href="javascript:;" class="clear">不删除</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="control clearfix">
                    <ul class="clearfix">
                        <li>
                            <input type="checkbox" class="all" />
                            <a href="javascript:;">全选</a>
                            <a href="javascript:;" class="remo">删除</a>
                        </li>
                        <li>
                            共<span class="order">4</span>件商品，已选择<span class="order1">1</span>件
                        </li>
                    </ul>
                    <a href="javascript:;" class="close">结算</a>
                    <span>￥<b class="total">0.00</b></span>
                    <p>
                        合计：<br />[不含运费]
                    </p>
                </div>
            </div>
            <footer>
                <div class="footer_up">
                    <div class="footer_con clearfix">
                        <div class="help clearfix">
                            <h2>帮助信息</h2>
                            <ul>
                                <li><a href="javascript:;"><i class="iconfont">&#xe65d;</i>购物指南</a></li>
                                <li><a href="javascript:;"><i class="iconfont">&#xe611;</i>支付方式</a></li>
                                <li><a href="javascript:;"><i class="iconfont">&#xe63b;</i>配送方式</a></li>
                                <li><a href="javascript:;"><i class="iconfont">&#xe501;</i>售后服务</a></li>
                            </ul>
                            <ul>
                                <li><a href="javascript:;"><i class="iconfont">&#xe6b9;</i>服务中心</a></li>
                                <li><a href="javascript:;"><i class="iconfont">&#xe640;</i>关于我们</a></li>
                                <li><a href="javascript:;"><i class="iconfont">&#xe6c9;</i>免责条款</a></li>
                                <li><a href="javascript:;"><i class="iconfont">&#xe636;</i>友情链接</a></li>
                            </ul>
                        </div>
                        <div class="about">
                            <h2>关注我们</h2>
                            <img src="../images/about_07.jpg" alt="" />
                        </div>
                        <div class="call">
                            <h2>客服热线</h2>
                            <p>400 113 5353<span>[周一至周五 9:00-18:00]</span></p>
                        </div>
                    </div>
                </div>
                <div class="footer_down">
                    <div class="footer_con1 clearfix">
                        <img src="../images/logo1_07.jpg" alt="" />
                        <p>北京开普勒科技有限公司@版权所有 Copyright 2015-2025 Morethan.cc all rights reserved. <br />北京市朝阳区建国路93号院4号楼4层505</p>
                    </div>
                </div>
            </footer>
        </div>
        <script>
            var all = document.querySelectorAll('.all')
            var input = document.querySelectorAll('input[type=checkbox]')
            var shop = document.querySelectorAll('.shop')
            var total = parseFloat(document.querySelector('.total').innerHTML)
            var com = document.querySelectorAll('.comment')
            var modal = document.querySelector('.modal')
            var sum = document.querySelector('.sum').innerHTML
            var order = document.querySelector('.order').innerHTML
            for(var i=0; i<input.length;i++){
                input[i].checked=true
                // console.log(input[i].checked)
            }
            //全选按钮
            // console.log(input)
            for(var i = 0; i<all.length;i++){
                all[i].onchange=function(){
                    var allChecked = this.checked
                    for(var j=0; j<input.length;j++){
                        input[j].checked=allChecked
                    }
                    total1()
                    number()
                    number1()
                }
            }
            //商品数量
            function number(){
                var num = 0
                shop = document.querySelectorAll('.shop')
                for(var i=0; i<shop.length;i++){
                    if(shop[i].checked){
                        var node = Number(shop[i].parentNode.parentNode.querySelector('.int').value)
                        num = num + node
                    }
                }
                document.querySelector('.order1').innerHTML=num
            }
            function number1(){
                shop = document.querySelectorAll('.shop')
                var order = 0;
                for(var i=0; i<shop.length;i++){
                    if(shop[i]){
                        var node1 = Number(shop[i].parentNode.parentNode.querySelector('.int').value)
                        order=order+node1
                    }
                }
                document.querySelector('.order').innerHTML=order
                document.querySelector('.sum').innerHTML=order
            }
            number()
            number1()
            // 计算总价
            function total1(){
                var total = 0
                for( var i = 0;i<shop.length; i++){
                    if(shop[i].checked){
                        var subtotal = parseFloat(shop[i].parentNode.parentNode.querySelector('.subtotal').innerHTML)
                        total = total + subtotal
                    }
                }
                document.querySelector('.total').innerHTML= total
            }
            total1()
            //商品按钮
            for(var i=0; i<shop.length;i++){
                shop[i].onchange=function(){
                    total1()
                    number()
                    number1()
                    for(var k=0; k<shop.length;k++){
                       for(var j=0; j<all.length; j++){
                            if(this.checked&&shop[k].checked){
                                all[j].checked=true
                            }else{
                                all[j].checked=false
                            }
                        }
                    }
                }
            }
            //加减法删除
            console.log(com)
            for(var i=0; i<com.length;i++){
                com[i].onclick=function(e){
                    var e = e.target
                    switch(e.className){
                        case 'add':
                        var subtotal = parseFloat(this.querySelector('.subtotal').innerHTML)
                        var price = parseFloat(this.querySelector('.price').innerHTML)
                        var count = parseFloat(this.querySelector('.int').value)
                        var shopping = this.querySelector('.shop')
                        var newtotal = parseFloat(document.querySelector('.total').innerHTML)
                        count = count+1
                        this.querySelector('.int').value=count
                        this.querySelector('.subtotal').innerHTML=count * price
                        if(shopping.checked){
                            document.querySelector('.total').innerHTML=parseFloat(newtotal)+price
                        }
                        number()
                        number1()
                        break;
                        case 'sub':
                        var subtotal = parseFloat(this.querySelector('.subtotal').innerHTML)
                        var price = parseFloat(this.querySelector('.price').innerHTML)
                        var count = parseFloat(this.querySelector('.int').value)
                        var shopping = this.querySelector('.shop')
                        var newtotal = parseFloat(document.querySelector('.total').innerHTML)
                        if(count>1){
                           count = count-1
                            this.querySelector('.int').value=count
                            this.querySelector('.subtotal').innerHTML=count * price
                            if(shopping.checked){
                                var tt =parseFloat(document.querySelector('.total').innerHTML)
                                document.querySelector('.total').innerHTML= tt -price
                            }
                        }
                        number()
                        number1()
                        break;
                        case 'remove':
                        var show = this.querySelector('.show')
                        console.log(show)
                        show.style.display='block'
                        break;
                        case 'ok':
                        var comment = this.parentNode.querySelector('.comment')
                        console.log(comment)
                        this.parentNode.removeChild(comment)
                        var con = document.querySelectorAll('.comment')
                        number()
                        number1()
                            if(con.length==0){
                                console.log(1)
                                document.querySelector('.main').style.display='none'
                                document.querySelector('.sky').style.display ='block'
                            }
                        break;
                        case 'clear' :
                        var clear = document.querySelectorAll('.clear')
                        for(var i=0; i<clear.length;i++){
                            clear[i].parentNode.style.display='none'
                        }
                    }
                }
            }
            document.querySelector('.remo').onclick=function(){

                for(var i=0; i<shop.length;i++){
                    if(shop[i].checked){
                        var comment = shop[i].parentNode.parentNode.parentNode.parentNode.querySelector('.comment')
                        console.log(comment)
                        console.log(this)
                        document.querySelector('.main_con').removeChild(comment)
                        var con = document.querySelectorAll('.comment')
                            if(con.length==0){
                                console.log(1)
                                document.querySelector('.main').style.display='none'
                                document.querySelector('.sky').style.display ='block'
                        }
                    }
                }
            }
            //登录注册
            function checkPhone(){
                var phone = document.querySelector('.username').value;
                if(!(/^1[34578]\d{9}$/.test(phone))){
                    alert("手机号码有误，请重填");
                    return false;
                }
            }
            function password(){
                var password = document.querySelector('.password').value;
                if(!(/888888/.test(password))){
                    alert("密码错误");
                    return false;
                }
            }
            // 模态框
            document.querySelector('.login1').onclick=function(){
                modal.style.display='block'
            }
            modal.onclick=function(){
                this.style.display='none'
            }
            //账号
            document.querySelector('.username').onblur=function(){
                checkPhone()
            }
            //密码
            document.querySelector('.password').onblur=function(){
                password()
            }
            // 弹窗
            document.querySelector('.card').onclick=function(e){
                e.stopPropagation()
                var ele=e.target
                switch(ele.className){
                    case 'clear1':
                    modal.style.display='none'
                    break;
                    case 'log':
                    var user= document.querySelector('.username').value
                    var pass=document.querySelector('.password').value
                    if(user!=false||pass!=false){
                        modal.style.display='none'
                        alert("登陆成功")
                        document.querySelector('.login1').innerHTML=user
                    }
                }
            }
            //结算按钮
            document.querySelector('.close').onclick=function(){
                var close = document.querySelector('.login1').innerHTML
                if(!(/^1[34578]\d{9}$/.test(close))){
                    modal.style.display="block"
                }else{
                    console.log(1)
                    this.setAttribute("href","./submit_order.html")
                }
            }
        </script>
    </body>
</html>